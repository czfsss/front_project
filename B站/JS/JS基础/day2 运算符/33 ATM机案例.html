<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATMè‡ªåŠ¨å–æ¬¾æœº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .atm-container {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            width: 450px;
            text-align: center;
        }

        .atm-header {
            margin-bottom: 30px;
        }

        .atm-title {
            color: #333;
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .balance-display {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 18px;
            color: #495057;
        }

        .menu-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .menu-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .menu-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .input-section {
            display: none;
            margin-top: 20px;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            border-color: #667eea;
        }

        .action-btn {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s ease;
        }

        .action-btn:hover {
            background: #218838;
        }

        .cancel-btn {
            background: #6c757d;
        }

        .cancel-btn:hover {
            background: #5a6268;
        }

        .message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        @media (max-width: 500px) {
            .atm-container {
                width: 90%;
                padding: 20px;
            }

            .menu-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="atm-container">
        <div class="atm-header">
            <h1 class="atm-title">ğŸ§ ATMè‡ªåŠ¨å–æ¬¾æœº</h1>
            <div class="balance-display">
                <strong>å½“å‰ä½™é¢ï¼šÂ¥<span id="balance-amount">***</span></strong>
            </div>
        </div>

        <div class="menu-buttons">
            <button class="menu-btn" onclick="checkBalance()">ğŸ’° æŸ¥è¯¢ä½™é¢</button>
            <button class="menu-btn" onclick="withdraw()">ğŸ’¸ å–æ¬¾</button>
            <button class="menu-btn" onclick="deposit()">ğŸ’´ å­˜æ¬¾</button>
            <button class="menu-btn" onclick="exitATM()">ğŸšª é€€å‡º</button>
        </div>

        <!-- å¯†ç è¾“å…¥ç•Œé¢ -->
        <div id="password-section" class="input-section">
            <h3>è¯·è¾“å…¥å¯†ç </h3>
            <input type="password" id="password-input" class="input-field" placeholder="è¯·è¾“å…¥6ä½å¯†ç " maxlength="6">
            <div>
                <button class="action-btn" onclick="verifyPassword()">ç¡®è®¤</button>
                <button class="action-btn cancel-btn" onclick="cancelOperation()">å–æ¶ˆ</button>
            </div>
        </div>

        <!-- å–æ¬¾ç•Œé¢ -->
        <div id="withdraw-section" class="input-section">
            <h3>è¯·è¾“å…¥å–æ¬¾é‡‘é¢</h3>
            <input type="number" id="withdraw-input" class="input-field" placeholder="è¯·è¾“å…¥å–æ¬¾é‡‘é¢" min="1">
            <div>
                <button class="action-btn" onclick="processWithdraw()">ç¡®è®¤å–æ¬¾</button>
                <button class="action-btn cancel-btn" onclick="cancelOperation()">å–æ¶ˆ</button>
            </div>
        </div>

        <!-- å­˜æ¬¾ç•Œé¢ -->
        <div id="deposit-section" class="input-section">
            <h3>è¯·è¾“å…¥å­˜æ¬¾é‡‘é¢</h3>
            <input type="number" id="deposit-input" class="input-field" placeholder="è¯·è¾“å…¥å­˜æ¬¾é‡‘é¢" min="1">
            <div>
                <button class="action-btn" onclick="processDeposit()">ç¡®è®¤å­˜æ¬¾</button>
                <button class="action-btn cancel-btn" onclick="cancelOperation()">å–æ¶ˆ</button>
            </div>
        </div>

        <!-- æ¶ˆæ¯æ˜¾ç¤ºåŒºåŸŸ -->
        <div id="message-area"></div>
    </div>

    <script>
        // åˆå§‹åŒ–ä½™é¢
        let balance = 1000;
        const PASSWORD = "123456";
        let passwordAttempts = 0;
        const MAX_ATTEMPTS = 3;

        // æ˜¾ç¤ºæ¶ˆæ¯å‡½æ•°
        function showMessage(message, type = 'success') {
            const messageArea = document.getElementById('message-area');
            messageArea.innerHTML = `<div class="message ${type}">${message}</div>`;

            // 3ç§’åè‡ªåŠ¨æ¸…é™¤æ¶ˆæ¯
            setTimeout(() => {
                messageArea.innerHTML = '';
            }, 3000);
        }

        // éšè—æ‰€æœ‰è¾“å…¥åŒºåŸŸ
        function hideAllSections() {
            document.getElementById('password-section').style.display = 'none';
            document.getElementById('withdraw-section').style.display = 'none';
            document.getElementById('deposit-section').style.display = 'none';
        }

        // æ›´æ–°ä½™é¢æ˜¾ç¤º
        function updateBalanceDisplay(show = false) {
            const balanceElement = document.getElementById('balance-amount');
            balanceElement.textContent = show ? balance.toLocaleString() : '***';
        }

        // æŸ¥è¯¢ä½™é¢
        function checkBalance() {
            hideAllSections();
            document.getElementById('password-section').style.display = 'block';
            document.getElementById('password-input').focus();
            document.getElementById('password-input').setAttribute('data-action', 'balance');
        }

        // éªŒè¯å¯†ç 
        function verifyPassword() {
            const passwordInput = document.getElementById('password-input');
            const password = passwordInput.value;
            const action = passwordInput.getAttribute('data-action');

            if (password === PASSWORD) {
                passwordAttempts = 0;
                hideAllSections();

                if (action === 'balance') {
                    updateBalanceDisplay(true);
                    showMessage(`å¯†ç æ­£ç¡®ï¼Œç™»å½•æˆåŠŸï¼æ‚¨çš„ä½™é¢ä¸ºï¼šÂ¥${balance.toLocaleString()}`, 'success');
                }

                passwordInput.value = '';
            } else {
                passwordAttempts++;
                passwordInput.value = '';

                if (passwordAttempts >= MAX_ATTEMPTS) {
                    showMessage('å¯†ç é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè´¦æˆ·å·²é”å®šï¼è¯·è”ç³»é“¶è¡Œå¤„ç†ã€‚', 'error');
                    setTimeout(() => {
                        location.reload();
                    }, 3000);
                } else {
                    showMessage(`å¯†ç é”™è¯¯ï¼è¿˜æœ‰${MAX_ATTEMPTS - passwordAttempts}æ¬¡æœºä¼š`, 'error');
                    passwordInput.focus();
                }
            }
        }

        // å–æ¬¾
        function withdraw() {
            hideAllSections();
            document.getElementById('withdraw-section').style.display = 'block';
            document.getElementById('withdraw-input').focus();
        }

        // å¤„ç†å–æ¬¾
        function processWithdraw() {
            const withdrawInput = document.getElementById('withdraw-input');
            const amount = parseFloat(withdrawInput.value);

            if (isNaN(amount) || amount <= 0) {
                showMessage('è¯·è¾“å…¥æœ‰æ•ˆçš„å–æ¬¾é‡‘é¢ï¼', 'error');
                return;
            }

            if (amount > balance) {
                showMessage('å–æ¬¾é‡‘é¢è¶…å‡ºä½™é¢ï¼Œè¯·é‡æ–°è¾“å…¥ï¼', 'error');
                withdrawInput.value = '';
                withdrawInput.focus();
                return;
            }

            balance -= amount;
            hideAllSections();
            updateBalanceDisplay(true);
            showMessage(`å–æ¬¾æˆåŠŸï¼å–æ¬¾é‡‘é¢ï¼šÂ¥${amount.toLocaleString()}ï¼Œå½“å‰ä½™é¢ï¼šÂ¥${balance.toLocaleString()}`, 'success');
            withdrawInput.value = '';
        }

        // å­˜æ¬¾
        function deposit() {
            hideAllSections();
            document.getElementById('deposit-section').style.display = 'block';
            document.getElementById('deposit-input').focus();
        }

        // å¤„ç†å­˜æ¬¾
        function processDeposit() {
            const depositInput = document.getElementById('deposit-input');
            const amount = parseFloat(depositInput.value);

            if (isNaN(amount) || amount <= 0) {
                showMessage('è¯·è¾“å…¥æœ‰æ•ˆçš„å­˜æ¬¾é‡‘é¢ï¼', 'error');
                return;
            }

            balance += amount;
            hideAllSections();
            updateBalanceDisplay(true);
            showMessage(`å­˜æ¬¾æˆåŠŸï¼å­˜æ¬¾é‡‘é¢ï¼šÂ¥${amount.toLocaleString()}ï¼Œå½“å‰ä½™é¢ï¼šÂ¥${balance.toLocaleString()}`, 'success');
            depositInput.value = '';
        }

        // å–æ¶ˆæ“ä½œ
        function cancelOperation() {
            hideAllSections();
            // æ¸…ç©ºæ‰€æœ‰è¾“å…¥æ¡†
            document.getElementById('password-input').value = '';
            document.getElementById('withdraw-input').value = '';
            document.getElementById('deposit-input').value = '';
            showMessage('æ“ä½œå·²å–æ¶ˆ', 'warning');
        }

        // é€€å‡ºATM
        function exitATM() {
            showMessage('æ„Ÿè°¢ä½¿ç”¨ATMè‡ªåŠ¨å–æ¬¾æœºï¼Œå†è§ï¼', 'success');
            setTimeout(() => {
                if (confirm('ç¡®å®šè¦é€€å‡ºATMç³»ç»Ÿå—ï¼Ÿ')) {
                    window.close();
                }
            }, 1000);
        }

        // æ·»åŠ å›è½¦é”®æ”¯æŒ
        document.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const activeElement = document.activeElement;

                if (activeElement.id === 'password-input') {
                    verifyPassword();
                } else if (activeElement.id === 'withdraw-input') {
                    processWithdraw();
                } else if (activeElement.id === 'deposit-input') {
                    processDeposit();
                }
            }
        });

        // åˆå§‹åŒ–
        updateBalanceDisplay();
    </script>
</body>

</html>